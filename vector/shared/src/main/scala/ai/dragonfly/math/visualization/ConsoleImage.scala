package ai.dragonfly.math.visualization

import ai.dragonfly.math.*
import example.Demonstrable
import vector.{Vector, Vector2}
import geometry.Line
import visualization.ConsoleImage.{BLACK, GRAY, WHITE, colorBytes}

object ConsoleImage extends Demonstrable {

/*
Рањ╠ђ 	Рањ╠Ђ 	Рањ╠ѓ 	Рањ╠Ѓ 	Рањ╠ё 	Рањ╠Ё 	Рањ╠є 	Рањ╠Є 	Рањ╠ѕ 	Рањ╠Ѕ 	Рањ╠і 	Рањ╠І 	Рањ╠ї 	Рањ╠Ї 	Рањ╠ј 	Рањ╠Ј
Рањ╠љ 	Рањ╠Љ 	Рањ╠њ 	Рањ╠Њ 	Рањ╠ћ 	Рањ╠Ћ 	Рањ╠ќ 	Рањ╠Ќ 	Рањ╠ў 	Рањ╠Ў 	Рањ╠џ 	Рањ╠Џ 	Рањ╠ю 	Рањ╠Ю 	Рањ╠ъ 	Рањ╠Ъ
Рањ╠а 	Рањ╠А 	Рањ╠б 	Рањ╠Б 	Рањ╠ц 	Рањ╠Ц 	Рањ╠д 	Рањ╠Д 	Рањ╠е 	Рањ╠Е 	Рањ╠ф 	Рањ╠Ф 	Рањ╠г 	Рањ╠Г 	Рањ╠« 	Рањ╠»
Рањ╠░ 	Рањ╠▒ 	Рањ╠▓ 	Рањ╠│ 	Рањ╠┤ 	Рањ╠х 	Рањ╠Х 	Рањ╠и 	Рањ╠И 	Рањ╠╣ 	Рањ╠║ 	Рањ╠╗ 	Рањ╠╝ 	Рањ╠й 	Рањ╠Й 	Рањ╠┐
Рањ═ђ 	Рањ═Ђ 	Рањ═ѓ 	Рањ═Ѓ 	Рањ═ё 	Рањ═Ё 	Рањ═є 	Рањ═Є 	Рањ═ѕ 	Рањ═Ѕ 	Рањ═і 	Рањ═І 	Рањ═ї 	Рањ═Ї 	Рањ═ј
Рањ═љ 	Рањ═Љ 	Рањ═њ 	Рањ═Њ 	Рањ═ћ 	Рањ═Ћ 	Рањ═ќ 	Рањ═Ќ 	Рањ═ў 	Рањ═Ў 	Рањ═џ 	Рањ═Џ 	Рањ═юРањ 	Рањ═ЮРањ 	Рањ═ъРањ 	Рањ═ЪРањ
Рањ═аРањ 	Рањ═АРањ 	Рањ═бРањ 	Рањ═Б 	Рањ═ц 	Рањ═Ц 	Рањ═д 	Рањ═Д 	Рањ═е 	Рањ═Е 	Рањ═ф 	Рањ═Ф 	Рањ═г 	Рањ═Г
Рањриђ 	РањриЂ 	Рањриѓ 	РањриЃ 	Рањриё 	РањриЁ 	Рањриє 	РањриЄ 	Рањриѕ 	РањриЅ 	Рањриі 	РањриІ 	Рањриї 	РањриЇ 	Рањриј 	РањриЈ
РањРЃљ 	РањРЃЉ 	РањРЃњ 	РањРЃЊ 	РањРЃћ 	РањРЃЋ 	РањРЃќ 	РањРЃЌ 	РањРЃў 	РањРЃЎ 	РањРЃџ 	РањРЃЏ 	РањРЃю 	РањРЃЮ 	РањРЃъ 	РањРЃЪ
РањРЃа 	РањРЃА 	РањРЃб 	РањРЃБ 	РањРЃц 	РањРЃЦ 	РањРЃд 	РањРЃД 	Рањ 	РањРЃЕ 	РањРЃф 	РањРЃФ 	РањРЃг 	РањРЃГ 	РањРЃ« 	РањРЃ»
РањРЃ░ 	РањриЊ 	Рањрић 	РањриЋ 	Рањриќ 	РањриЌ 	Рањриў 	РањриЎ 	Рањриџ 	РањриЏ 	Рањрию 	РањриЮ 	Рањриъ 	РањриЪ  	Рањ═« 	Рањ═»
Рањриа 	РањриА 	Рањриб 	РањриБ 	Рањриц 	РањриЦ 	Рањрид 	Рањри╝ 	Рањрий 	РањриЙ 	Рањри┐
Рањ№Иа 	Рањ№ИА 	Рањ№Иб 	Рањ№ИБ 	Рањ№Иц 	Рањ№ИЦ 	Рањ№Ид

РађРЃА 	РађриЃ 	Рађриё 	РађриЁ 	Рађриє 	РађриЄ 	Рађриѕ 	РађриЅ 	РађриІ 	Рађриї 	Рађриј 	РађРЃљ 	РађРЃЉ 	РађРЃћ 	РађРЃЋ 	РађРЃќ 	РађРЃЌ
Рађ═І 	Рађ═ї 	Рађриђ 	РађриЂ 	РађРЃЏ 	РађРЃю 	Рађ№Ид 	Рађриа 	РађриА 	Рађриб 	РађриБ 	Рађриц 	РађриЦ 	Рађрид 	РађриЙ 	Рађ№Иа 	Рађ№ИА 	Рађ№Иб 	Рађ№ИБ 	Рађ№Иц 	Рађ№ИЦ
РађРЃЕ 	РађРЃ░ 	РађриЊ 	Рађрић 	РађриЋ 	Рађриќ 	РађриЌ 	Рађриў 	РађриЎ 	Рађриџ 	РађриЏ 	Рађрию 	РађриЮ 	Рађриъ 	РађриЪ
Рађ═« 	Рађ═» 	Рађ═љ 	Рађ═Љ 	Рађ═њ 	Рађ═Ќ 	Рађ═Џ 	Рађ═Б 	Рађ═ц 	Рађ═Ц 	Рађ═ђ 	Рађ═Ђ 	Рађ═ѓ 	Рађ═ё 	Рађ═є 	Рађ═і 	Рађ═д 	Рађ═Д 	Рађ═е 	Рађ═Е 	Рађ═ф 	Рађ═Ф 	Рађ═г 	Рађ═Г
РађРЃф 	РађРЃў 	РађРЃЎ 	РађРЃџ
Рађ═Њ 	Рађ═ћ 	Рађ═Ћ 	Рађ═ќ 	Рађ═Ў 	Рађ═џ 	Рађри╝ 	Рађрий 	Рађри┐

РањРЃъ 	РањРЃЪ 	РањРЃа 	РањРЃб 	РањРЃБ 	РањРЃц
РањРЃФ 	РањРЃЦ 	РањРЃд 	РањРЃД

 ═ђ═Ђ

*/

  val layerGlyphs:Array[String] = Array[String](
    //  "риј", "риђ", "риў", "═љриЙ", "═њ", "═Ђ═ђ", "═Б═џ═џ", "═ѓ", "═д═д═д═д", "═е═е═е═е═е", "риЃ",
    "РЃў", "РЃЪ", "РЃБ" //, "РЃа"
  )

  val brailleBytes:Array[String] = Array[String](
    "Рађ", "РаЂ", "Раѓ", "РаЃ", "Раё", "РаЁ", "Рає", "РаЄ", "РАђ", "РАЂ", "РАѓ", "РАЃ", "РАё", "РАЁ", "РАє", "РАЄ", "Раѕ", "РаЅ", "Раі", "РаІ", "Раї", "РаЇ", "Рај", "РаЈ", "РАѕ", "РАЅ", "РАі", "РАІ", "РАї", "РАЇ", "РАј", "РАЈ", "Раљ", "РаЉ", "Рањ", "РаЊ", "Раћ", "РаЋ", "Раќ", "РаЌ", "РАљ", "РАЉ", "РАњ", "РАЊ", "РАћ", "РАЋ", "РАќ", "РАЌ", "Раў", "РаЎ", "Раџ", "РаЏ", "Раю", "РаЮ", "Раъ", "РаЪ", "РАў", "РАЎ", "РАџ", "РАЏ", "РАю", "РАЮ", "РАъ", "РАЪ", "Раа", "РаА", "Раб", "РаБ", "Рац", "РаЦ", "Рад", "РаД", "РАа", "РАА", "РАб", "РАБ", "РАц", "РАЦ", "РАд", "РАД", "Рае", "РаЕ", "Раф", "РаФ", "Раг", "РаГ", "Ра«", "Ра»", "РАе", "РАЕ", "РАф", "РАФ", "РАг", "РАГ", "РА«", "РА»", "Ра░", "Ра▒", "Ра▓", "Ра│", "Ра┤", "Рах", "РаХ", "Раи", "РА░", "РА▒", "РА▓", "РА│", "РА┤", "РАх", "РАХ", "РАи", "РаИ", "Ра╣", "Ра║", "Ра╗", "Ра╝", "Рай", "РаЙ", "Ра┐", "РАИ", "РА╣", "РА║", "РА╗", "РА╝", "РАй", "РАЙ", "РА┐", "Рбђ", "РбЂ", "Рбѓ", "РбЃ", "Рбё", "РбЁ", "Рбє", "РбЄ", "РБђ", "РБЂ", "РБѓ", "РБЃ", "РБё", "РБЁ", "РБє", "РБЄ", "Рбѕ", "РбЅ", "Рбі", "РбІ", "Рбї", "РбЇ", "Рбј", "РбЈ", "РБѕ", "РБЅ", "РБі", "РБІ", "РБї", "РБЇ", "РБј", "РБЈ", "Рбљ", "РбЉ", "Рбњ", "РбЊ", "Рбћ", "РбЋ", "Рбќ", "РбЌ", "РБљ", "РБЉ", "РБњ", "РБЊ", "РБћ", "РБЋ", "РБќ", "РБЌ", "Рбў", "РбЎ", "Рбџ", "РбЏ", "Рбю", "РбЮ", "Рбъ", "РбЪ", "РБў", "РБЎ", "РБџ", "РБЏ", "РБю", "РБЮ", "РБъ", "РБЪ", "Рба", "Рба", "Рбб", "РбБ", "Рбц", "РбЦ", "Рбд", "РбД", "РБа", "РБА", "РБб", "РББ", "РБц", "РБЦ", "РБд", "РБД", "Рбе", "РбЕ", "Рбф", "РбФ", "Рбг", "РбГ", "Рб«", "Рб»", "РБе", "РБЕ", "РБф", "РБФ", "РБг", "РБГ", "РБ«", "РБ»", "Рб░", "Рб▒", "Рб▓", "Рб│", "Рб┤", "Рбх", "РбХ", "Рби", "РБ░", "РБ▒", "РБ▓", "РБ│", "РБ┤", "РБх", "РБХ", "РБи", "РбИ", "Рб╣", "Рб║", "Рб╗", "Рб╝", "Рбй", "РбЙ", "Рб┐", "РБИ", "РБ╣", "РБ║", "РБ╗", "РБ╝", "РБй", "РБЙ", "РБ┐",
  )

  // Red + Green = Yellow
  // Red + Blue = Magenta
  // Green + Blue = Cyan
  // Red + Green + Blue = White

  val BLACK:Int = 0
  val RED:Int = 1
  val GREEN:Int = 2
  val YELLOW:Int = 3
  val BLUE:Int = 4
  val MAGENTA:Int = 5
  val CYAN:Int = 6
  val WHITE:Int = 7
  val GRAY:Int = 8

  val colorBytes:Array[String] = Array[String](
    Console.BLACK,
    Console.RED,
    Console.GREEN,
    Console.YELLOW,
    Console.BLUE,
    Console.MAGENTA,
    Console.CYAN,
    Console.RESET,
    Console.WHITE
  )

  def randomSpiral(ci:ConsoleImage, color:Int):ConsoleImage = {
    val p:Vector2 = Vector2.random(ci.width, ci.height)
    val v:Vector2 = Vector2(1.0, 0.0)
    val s = 1.002 + (Math.random() * 0.0002)
    val dT:Double = (Math.random() - 0.5) * Math.PI / 100.0
    var pV:Vector2 = v.copy()
    val end = squareInPlace(ci.width) + squareInPlace(ci.height)
    while (v.magnitudeSquared() < end){
      pV = p + v
      v.rotate(dT).scale(s)
      Line.discrete(
        pV,
        p + v,
        (dX:Int, dY:Int) => {
          if (dX >= 0 && dX < ci.width) {
            if (dY >= 0 && dY < ci.height) {
              ci.setPixel(dX, dY, color)
            }
          }
        }
      )
    }
    ci
  }

  override def demo(implicit sb:StringBuilder = new StringBuilder()):StringBuilder = {

    val ci: ConsoleImage = new ConsoleImage(200, 200)
    for (i <- 0 until 7) {
      randomSpiral(ci, 1 << (i % 3))
    }
    sb.append(ci)

    sb
  }

  override def name: String = "ConsoleImage"

}

class ConsoleImage(val width:Int, val height:Int) {

  import Console.{BOLD, RESET}

  private val w:Int = width / 2
  private val h:Int = height / 4

  inline def linearIndexOf(x: Int, y: Int): Int = ((y / 4) * w ) + (x / 2)

  val pixels:Array[Int] = Array.fill(linearIndexOf(width, height))(0)

  val layer:Array[String] = Array.fill(linearIndexOf(width, height))("")

  def setPixel(x:Int, y:Int, color:Int):ConsoleImage = {
    val i:Int = linearIndexOf(x, y)
    if (i > -1 && i < pixels.length) {
      pixels(i) = pixels(i) | ((color << 16) | ((1 << (y % 4)) << (x % 2 * 4)))
      // erasing? (if (color == K) pixels(i) & ~byte else pixels(i) | byte)
    }
    this
  }

  def setGlyph(x:Int, y:Int, glyph:String, color:Int):ConsoleImage = {
    val i:Int = linearIndexOf(x, y)
    if (i > -1 && i < pixels.length) {
      layer(i) = layer(i) + glyph
      pixels(i) = pixels(i) | (color << 16)
    }
    this
  }

  def lines:Array[String] = {
    val out:Array[String] = new Array[String](h)
    for (y <- 0 until h) {
      var lastColor:Int = 0
      val sb:StringBuilder = StringBuilder()
      for (x <- 0 until w) {
        val bytes = pixels((y * w) + x)
        var color = bytes >> 16
        if (color > WHITE) {
          color = color & WHITE
        }
        if (color < 1) color = ConsoleImage.colorBytes.length - 1
        val pattern = bytes & 0x000000ff
        if (color == lastColor || color == 0) {
          sb.append(ConsoleImage.brailleBytes(pattern))
        } else {
          lastColor = color
          sb.append(ConsoleImage.colorBytes(color))
          sb.append(ConsoleImage.brailleBytes(pattern))
        }
        sb.append(layer((y * w) + x))
      }
      out(y) = sb.append(RESET).toString()
    }
    out
  }

  override def toString:String = {
    val sb:StringBuilder = StringBuilder()
    val ls:Array[String] = lines
    for (line <- ls) {
      sb.append(line).append("\n")
    }
    sb.toString()
  }
}

/* Unicode Braille Characters for Plotting:

РаЂ╠Є РаѕРаѓРаљрЏФ┬и­Ює║­Ює╣РаёРаа.РАђРбђ╠Б [ РЃў][╠і ][Рађ═д]
РџђРџЂРџѓРџЃРџёРџЁ
­ЪЂБ­ЪЂц­ЪЂЦ­ЪЂд­ЪЂД­ЪЂе­ЪЂЕ
­ЪЂф­ЪЂФ­ЪЂг­ЪЂГ­ЪЂ«­ЪЂ»­ЪЂ░
­ЪЂ▒­ЪЂ▓­ЪЂ│­ЪЂ┤­ЪЂх­ЪЂХ­ЪЂи
­ЪЂИ­ЪЂ╣­ЪЂ║­ЪЂ╗­ЪЂ╝­ЪЂй­ЪЂЙ
­ЪЂ┐­Ъѓђ­ЪѓЂ­Ъѓѓ­ЪѓЃ­Ъѓё­ЪѓЁ
­Ъѓє­ЪѓЄ­Ъѓѕ­ЪѓЅ­Ъѓі­ЪѓІ­Ъѓї
­ЪѓЇ­Ъѓј­ЪѓЈ­Ъѓљ­ЪѓЉ­Ъѓњ­ЪѓЊ
­ЪЂб

­Ъђ▒­Ъђ▓­Ъђ│­Ъђ┤­Ъђх­ЪђХ­Ъђи
­ЪђИ­Ъђ╣­Ъђ║­Ъђ╗­Ъђ╝­Ъђй­ЪђЙ
­Ъђ┐­ЪЂђ­ЪЂЂ­ЪЂѓ­ЪЂЃ­ЪЂё­ЪЂЁ
­ЪЂє­ЪЂЄ­ЪЂѕ­ЪЂЅ­ЪЂі­ЪЂІ­ЪЂї
­ЪЂЇ­ЪЂј­ЪЂЈ­ЪЂљ­ЪЂЉ­ЪЂњ­ЪЂЊ
­ЪЂћ­ЪЂЋ­ЪЂќ­ЪЂЌ­ЪЂў­ЪЂЎ­ЪЂџ
­ЪЂЏ­ЪЂю­ЪЂЮ­ЪЂъ­ЪЂЪ­ЪЂа­ЪЂА
­Ъђ░

РађРаѕРаљРаўРааРаеРа░РаИРбђРбѕРбљРбўРбаРбеРб░РбИ
РаЂРаЅРаЉРаЎРаАРаЕРа▒Ра╣РбЂРбЅРбЉРбЎРбаРбЕРб▒Рб╣
РаѓРаіРањРаџРабРафРа▓Ра║РбѓРбіРбњРбџРббРбфРб▓Рб║
РаЃРаІРаЊРаЏРаБРаФРа│Ра╗РбЃРбІРбЊРбЏРбБРбФРб│Рб╗
РаёРаїРаћРаюРацРагРа┤Ра╝РбёРбїРбћРбюРбцРбгРб┤Рб╝
РаЁРаЇРаЋРаЮРаЦРаГРахРайРбЁРбЇРбЋРбЮРбЦРбГРбхРбй
РаєРајРаќРаъРадРа«РаХРаЙРбєРбјРбќРбъРбдРб«РбХРбЙ
РаЄРаЈРаЌРаЪРаДРа»РаиРа┐РбЄРбЈРбЌРбЪРбДРб»РбиРб┐
РАђРАѕРАљРАўРАаРАеРА░РАИРБђРБѕРБљРБўРБаРБеРБ░РБИ
РАЂРАЅРАЉРАЎРААРАЕРА▒РА╣РБЂРБЅРБЉРБЎРБАРБЕРБ▒РБ╣
РАѓРАіРАњРАџРАбРАфРА▓РА║РБѓРБіРБњРБџРБбРБфРБ▓РБ║
РАЃРАІРАЊРАЏРАБРАФРА│РА╗РБЃРБІРБЊРБЏРББРБФРБ│РБ╗
РАёРАїРАћРАюРАцРАгРА┤РА╝РБёРБїРБћРБюРБцРБгРБ┤РБ╝
РАЁРАЇРАЋРАЮРАЦРАГРАхРАйРБЁРБЇРБЋРБЮРБЦРБГРБхРБй
РАєРАјРАќРАъРАдРА«РАХРАЙРБєРБјРБќРБъРБдРБ«РБХРБЙ
РАЄРАЈРАЌРАЪРАДРА»РАиРА┐РБЄРБЈРБЌРБЪРБДРБ»РБиРБ┐

Раа
Ра░
Рб░orРаИ
РбИ
РќЋ
РќЋ┬и
РќЋРає
РќЋРаЄorРАє
РќЋРАЄ
РќЋРќЇ
РБ┐№И▓РБ┐╠Б╠Є
РБ┐№┐цРБ┐
РБ┐№И░РБ┐
РБ┐№ИЎРБ┐
РБ┐РдЎРБ┐
РЃЏРБ┐РќЋРБ┐
РБ┐РќљРБ┐
РБ┐РІ«РБ┐
РБ┐РЂЮРБ┐
РБ┐РЂъРБ┐
РБ┐:РБ┐
РБ┐┬дРБ┐
РБ┐РћєРБ┐
РБ┐РћіРБ┐
РБ┐РЋјРБ┐
РБ┐РЋЈРБ┐
РБ┐РћІРБ┐
РБ┐РЂъРБ┐
РБ┐РћєРБ┐РЃЊ
РБ┐РћіРБ┐
РБ┐РђќРБ┐
Рдђ РдЎ
РБ┐┬иРБ┐:РБ┐№ИЎРБ┐РѕхРБ┐Рѕ┤РБ┐РЃъ
РбИРдЎ┬иРбИ:РбИ№ИЎРбИРѕхРбИРѕ┤РбИ
РбИРдЎРАЄ┬иРАЄ:РАЄ№ИЎ╠БрЏг№ИЎРАЄРѕхРАЄРѕ┤РАЄ
┬и :  Рѕх ╠БРѕ┤
№И░ №ИЎ ╠ЄрЏг╠БрЏг
РІ« РЂЮ РЂъ РЌї
№И▓ РЂќ РЂў РЂЎ РЂЏ
Рђд РђдРЃЏ РдЎРдЎРдЎРЃеРдЎРЃеРЃюРЃњ [РдЎРдЎРдЎРЃеРдЎ]РЃњ
РІ«РдЎРЃЏРЃе


╠Є╠Є╠Є╠Є

 РЂќ РЂў РЂЎ РЂЏ
РЌї

­ЪЂб­Ъѓа ­Ъђє ­ЪђФ ­ЪђЋ ­Ъђў ­Ъђъ ­Ъђа ­ЪђА
­Юёќ ­ЮёЌ ­Юёў ­ЮёЎ ­Юёџ ­ЮёЏ

РџіРџІ­Юїђ

РџїРџЇРџј
РџЈ­ЮїЂ­Юїѓ
­ЮїЃ­Юїё­ЮїЁ

Рў░ Рў▒ Рў▓ Рў│
Рў┤ Рўх РўХ Рўи

СиђСиЂСиѓСиЃСиёСиЁСиєСиЄ
СиѕСиЅСиіСиІСиїСиЇСијСиЈ
СиљСиЉСињСиЊСићСиЋСиќСиЌ
СиўСиЎСиџСиЏСиюСиЮСиъСиЪ
СиаСиАСибСиБСицСиЦСидСиД
СиеСиЕСифСиФСигСиГСи«Си»
Си░Си▒Си▓Си│Си┤СихСиХСии
СиИСи╣Си║Си╗Си╝СийСиЙСи┐

­Юїє­ЮїЄ­Юїѕ­ЮїЅ­Юїі­ЮїІ­Юїї­ЮїЇ­Юїј­ЮїЈ­Юїљ­ЮїЉ­Юїњ­ЮїЊ­Юїћ­ЮїЋ­Юїќ­ЮїЌ­Юїў­ЮїЎ
­Юїџ­ЮїЏ­Юїю­ЮїЮ­Юїъ­ЮїЪ­Юїа­ЮїА­Юїб­ЮїБ­Юїц­ЮїЦ­Юїд­ЮїД­Юїе­ЮїЕ­Юїф­ЮїФ­Юїг­ЮїГ
­Юї«­Юї»­Юї░­Юї▒­Юї▓­Юї│­Юї┤­Юїх­ЮїХ­Юїи­ЮїИ­Юї╣­Юї║­Юї╗­Юї╝­Юїй­ЮїЙ­Юї┐­ЮЇђ­ЮЇЂ
­ЮЇѓ­ЮЇЃ­ЮЇё­ЮЇЁ­ЮЇє­ЮЇЄ­ЮЇѕ­ЮЇЅ­ЮЇі­ЮЇІ­ЮЇї­ЮЇЇ­ЮЇј­ЮЇЈ­ЮЇљ­ЮЇЉ­ЮЇњ­ЮЇЊ­ЮЇћ­ЮЇЋ­ЮЇќ

РќЉ Рќњ РќЊ Рќѕ
РЌї
 РЃў
 РЃЎ
 РЃџ
Рд┐ РЌЅ РдЙ РЌї РЌј РўЅ РЃЮ Рђб РЌд ­ЮЄЄ ­ЮЄѕ РђбРЃб  РЌдРЃб  РђбРЃБ  РЌдРЃБ
Рўђ Рў╝ Рџ╣ РіЋ
РўЙРўй ­ЪїЉ ­Ъїњ ­ЪїЊ ­Ъїћ ­ЪїЋ ­Ъїќ ­ЪїЌ ­Ъїў
 ╠Є ╠Б рЏФ
Рђб╠Б┬и ╠Є╠БРђб

 ╠Є╠Б   РЃў

Рќц РќЦ Рќд РќД Рќе РќЕ
Рџё
x╠Б
Рањ╠ђ 	Рањ╠Ђ 	Рањ╠ѓ 	Рањ╠Ѓ 	Рањ╠ё 	Рањ╠Ё 	Рањ╠є 	Рањ╠Є 	Рањ╠ѕ 	Рањ╠Ѕ 	Рањ╠і 	Рањ╠І 	Рањ╠ї 	Рањ╠Ї 	Рањ╠ј 	Рањ╠Ј
Рањ╠љ 	Рањ╠Љ 	Рањ╠њ 	Рањ╠Њ 	Рањ╠ћ 	Рањ╠Ћ 	Рањ╠ќ 	Рањ╠Ќ 	Рањ╠ў 	Рањ╠Ў 	Рањ╠џ 	Рањ╠Џ 	Рањ╠ю 	Рањ╠Ю 	Рањ╠ъ 	Рањ╠Ъ
Рањ╠а 	Рањ╠А 	Рањ╠б 	Рањ╠Б 	Рањ╠ц 	Рањ╠Ц 	Рањ╠д 	Рањ╠Д 	Рањ╠е 	Рањ╠Е 	Рањ╠ф 	Рањ╠Ф 	Рањ╠г 	Рањ╠Г 	Рањ╠« 	Рањ╠»
Рањ╠░ 	Рањ╠▒ 	Рањ╠▓ 	Рањ╠│ 	Рањ╠┤ 	Рањ╠х 	Рањ╠Х 	Рањ╠и 	Рањ╠И 	Рањ╠╣ 	Рањ╠║ 	Рањ╠╗ 	Рањ╠╝ 	Рањ╠й 	Рањ╠Й 	Рањ╠┐
Рањ═ђ 	Рањ═Ђ 	Рањ═ѓ 	Рањ═Ѓ 	Рањ═ё 	Рањ═Ё 	Рањ═є 	Рањ═Є 	Рањ═ѕ 	Рањ═Ѕ 	Рањ═і 	Рањ═І 	Рањ═ї 	Рањ═Ї 	Рањ═ј
Рањ═љ 	Рањ═Љ 	Рањ═њ 	Рањ═Њ 	Рањ═ћ 	Рањ═Ћ 	Рањ═ќ 	Рањ═Ќ 	Рањ═ў 	Рањ═Ў 	Рањ═џ 	Рањ═Џ 	Рањ═юРањ 	Рањ═ЮРањ 	Рањ═ъРањ 	Рањ═ЪРањ
 	Рањ═аРањ 	Рањ═АРањ 	Рањ═бРањ 	Рањ═Б 	Рањ═ц 	Рањ═Ц 	Рањ═д 	Рањ═Д 	Рањ═е 	Рањ═Е 	Рањ═ф 	Рањ═Ф 	Рањ═г 	Рањ═Г
Рањриђ 	РањриЂ 	Рањриѓ 	РањриЃ 	Рањриё 	РањриЁ 	Рањриє 	РањриЄ 	Рањриѕ 	РањриЅ 	Рањриі 	РањриІ 	Рањриї 	РањриЇ 	Рањриј 	РањриЈ
РањРЃљ 	РањРЃЉ 	РањРЃњ 	РањРЃЊ 	РањРЃћ 	РањРЃЋ 	РањРЃќ 	РањРЃЌ 	РањРЃў 	РањРЃЎ 	РањРЃџ 	РањРЃЏ 	РањРЃю 	РањРЃЮ 	РањРЃъ 	РањРЃЪ
РањРЃа 	РањРЃА 	РањРЃб 	РањРЃБ 	РањРЃц 	РањРЃЦ 	РањРЃд 	РањРЃД 	Рањ 	РањРЃЕ 	РањРЃф 	РањРЃФ 	РањРЃг 	РањРЃГ 	РањРЃ« 	РањРЃ»
РањРЃ░ 	РањриЊ 	Рањрић 	РањриЋ 	Рањриќ 	РањриЌ 	Рањриў 	РањриЎ 	Рањриџ 	РањриЏ 	Рањрию 	РањриЮ 	Рањриъ 	РањриЪ  	Рањ═« 	Рањ═»
Рањриа 	РањриА 	Рањриб 	РањриБ 	Рањриц 	РањриЦ 	Рањрид 	Рањри╝ 	Рањрий 	РањриЙ 	Рањри┐
Рањ№Иа 	Рањ№ИА 	Рањ№Иб 	Рањ№ИБ 	Рањ№Иц 	Рањ№ИЦ 	Рањ№Ид

Combining Characters:
РађРЃљ 	РађРЃЉ 	РађРЃњ 	РађРЃЊ 	РађРЃћ 	РађРЃЋ 	РађРЃќ 	РађРЃЌ 	РађРЃў 	РађРЃЎ 	РађРЃџ 	РађРЃЏ 	РађРЃю 	РађРЃЮ 	РађРЃъ 	РађРЃЪ
РађРЃа 	РађРЃА 	РађРЃб 	РађРЃБ 	РађРЃц 	РађРЃЦ 	РађРЃд 	РађРЃД 	РађРЃе 	РађРЃЕ 	РађРЃф 	РађРЃФ 	РађРЃг 	РађРЃГ 	РађРЃ« 	РађРЃ»
РађРЃ░
РдЙ
*/


//  val braille:immutable.TreeMap[Int, String] = immutable.TreeMap[Int, String](
//    0 -> "Рађ", 0 + (1 << 4) -> "Раѕ", 0 + (2 << 4) -> "Раљ", 0 + (3 << 4) -> "Раў", 0 + (4 << 4) -> "Раа", 0 + (5 << 4) -> "Рае", 0 + (6 << 4) -> "Ра░", 0 + (7 << 4) -> "РаИ", 0 + (8 << 4) -> "Рбђ", 0 + (9 << 4) -> "Рбѕ", 0 + (10 << 4) -> "Рбљ", 0 + (11 << 4) -> "Рбў", 0 + (12 << 4) -> "Рба", 0 + (13 << 4) -> "Рбе", 0 + (14 << 4) -> "Рб░", 0 + (15 << 4) -> "РбИ",
//    1 -> "РаЂ", 1 + (1 << 4) -> "РаЅ", 1 + (2 << 4) -> "РаЉ", 1 + (3 << 4) -> "РаЎ", 1 + (4 << 4) -> "РаА", 1 + (5 << 4) -> "РаЕ", 1 + (6 << 4) -> "Ра▒", 1 + (7 << 4) -> "Ра╣", 1 + (8 << 4) -> "РбЂ", 1 + (9 << 4) -> "РбЅ", 1 + (10 << 4) -> "РбЉ", 1 + (11 << 4) -> "РбЎ", 1 + (12 << 4) -> "Рба", 1 + (13 << 4) -> "РбЕ", 1 + (14 << 4) -> "Рб▒", 1 + (15 << 4) -> "Рб╣",
//    2 -> "Раѓ", 2 + (1 << 4) -> "Раі", 2 + (2 << 4) -> "Рањ", 2 + (3 << 4) -> "Раџ", 2 + (4 << 4) -> "Раб", 2 + (5 << 4) -> "Раф", 2 + (6 << 4) -> "Ра▓", 2 + (7 << 4) -> "Ра║", 2 + (8 << 4) -> "Рбѓ", 2 + (9 << 4) -> "Рбі", 2 + (10 << 4) -> "Рбњ", 2 + (11 << 4) -> "Рбџ", 2 + (12 << 4) -> "Рбб", 2 + (13 << 4) -> "Рбф", 2 + (14 << 4) -> "Рб▓", 2 + (15 << 4) -> "Рб║",
//    3 -> "РаЃ", 3 + (1 << 4) -> "РаІ", 3 + (2 << 4) -> "РаЊ", 3 + (3 << 4) -> "РаЏ", 3 + (4 << 4) -> "РаБ", 3 + (5 << 4) -> "РаФ", 3 + (6 << 4) -> "Ра│", 3 + (7 << 4) -> "Ра╗", 3 + (8 << 4) -> "РбЃ", 3 + (9 << 4) -> "РбІ", 3 + (10 << 4) -> "РбЊ", 3 + (11 << 4) -> "РбЏ", 3 + (12 << 4) -> "РбБ", 3 + (13 << 4) -> "РбФ", 3 + (14 << 4) -> "Рб│", 3 + (15 << 4) -> "Рб╗",
//    4 -> "Раё", 4 + (1 << 4) -> "Раї", 4 + (2 << 4) -> "Раћ", 4 + (3 << 4) -> "Раю", 4 + (4 << 4) -> "Рац", 4 + (5 << 4) -> "Раг", 4 + (6 << 4) -> "Ра┤", 4 + (7 << 4) -> "Ра╝", 4 + (8 << 4) -> "Рбё", 4 + (9 << 4) -> "Рбї", 4 + (10 << 4) -> "Рбћ", 4 + (11 << 4) -> "Рбю", 4 + (12 << 4) -> "Рбц", 4 + (13 << 4) -> "Рбг", 4 + (14 << 4) -> "Рб┤", 4 + (15 << 4) -> "Рб╝",
//    5 -> "РаЁ", 5 + (1 << 4) -> "РаЇ", 5 + (2 << 4) -> "РаЋ", 5 + (3 << 4) -> "РаЮ", 5 + (4 << 4) -> "РаЦ", 5 + (5 << 4) -> "РаГ", 5 + (6 << 4) -> "Рах", 5 + (7 << 4) -> "Рай", 5 + (8 << 4) -> "РбЁ", 5 + (9 << 4) -> "РбЇ", 5 + (10 << 4) -> "РбЋ", 5 + (11 << 4) -> "РбЮ", 5 + (12 << 4) -> "РбЦ", 5 + (13 << 4) -> "РбГ", 5 + (14 << 4) -> "Рбх", 5 + (15 << 4) -> "Рбй",
//    6 -> "Рає", 6 + (1 << 4) -> "Рај", 6 + (2 << 4) -> "Раќ", 6 + (3 << 4) -> "Раъ", 6 + (4 << 4) -> "Рад", 6 + (5 << 4) -> "Ра«", 6 + (6 << 4) -> "РаХ", 6 + (7 << 4) -> "РаЙ", 6 + (8 << 4) -> "Рбє", 6 + (9 << 4) -> "Рбј", 6 + (10 << 4) -> "Рбќ", 6 + (11 << 4) -> "Рбъ", 6 + (12 << 4) -> "Рбд", 6 + (13 << 4) -> "Рб«", 6 + (14 << 4) -> "РбХ", 6 + (15 << 4) -> "РбЙ",
//    7 -> "РаЄ", 7 + (1 << 4) -> "РаЈ", 7 + (2 << 4) -> "РаЌ", 7 + (3 << 4) -> "РаЪ", 7 + (4 << 4) -> "РаД", 7 + (5 << 4) -> "Ра»", 7 + (6 << 4) -> "Раи", 7 + (7 << 4) -> "Ра┐", 7 + (8 << 4) -> "РбЄ", 7 + (9 << 4) -> "РбЈ", 7 + (10 << 4) -> "РбЌ", 7 + (11 << 4) -> "РбЪ", 7 + (12 << 4) -> "РбД", 7 + (13 << 4) -> "Рб»", 7 + (14 << 4) -> "Рби", 7 + (15 << 4) -> "Рб┐",
//    8 -> "РАђ", 8 + (1 << 4) -> "РАѕ", 8 + (2 << 4) -> "РАљ", 8 + (3 << 4) -> "РАў", 8 + (4 << 4) -> "РАа", 8 + (5 << 4) -> "РАе", 8 + (6 << 4) -> "РА░", 8 + (7 << 4) -> "РАИ", 8 + (8 << 4) -> "РБђ", 8 + (9 << 4) -> "РБѕ", 8 + (10 << 4) -> "РБљ", 8 + (11 << 4) -> "РБў", 8 + (12 << 4) -> "РБа", 8 + (13 << 4) -> "РБе", 8 + (14 << 4) -> "РБ░", 8 + (15 << 4) -> "РБИ",
//    9 -> "РАЂ", 9 + (1 << 4) -> "РАЅ", 9 + (2 << 4) -> "РАЉ", 9 + (3 << 4) -> "РАЎ", 9 + (4 << 4) -> "РАА", 9 + (5 << 4) -> "РАЕ", 9 + (6 << 4) -> "РА▒", 9 + (7 << 4) -> "РА╣", 9 + (8 << 4) -> "РБЂ", 9 + (9 << 4) -> "РБЅ", 9 + (10 << 4) -> "РБЉ", 9 + (11 << 4) -> "РБЎ", 9 + (12 << 4) -> "РБА", 9 + (13 << 4) -> "РБЕ", 9 + (14 << 4) -> "РБ▒", 9 + (15 << 4) -> "РБ╣",
//    10 -> "РАѓ", 10 + (1 << 4) -> "РАі", 10 + (2 << 4) -> "РАњ", 10 + (3 << 4) -> "РАџ", 10 + (4 << 4) -> "РАб", 10 + (5 << 4) -> "РАф", 10 + (6 << 4) -> "РА▓", 10 + (7 << 4) -> "РА║", 10 + (8 << 4) -> "РБѓ", 10 + (9 << 4) -> "РБі", 10 + (10 << 4) -> "РБњ", 10 + (11 << 4) -> "РБџ", 10 + (12 << 4) -> "РБб", 10 + (13 << 4) -> "РБф", 10 + (14 << 4) -> "РБ▓", 10 + (15 << 4) -> "РБ║",
//    11 -> "РАЃ", 11 + (1 << 4) -> "РАІ", 11 + (2 << 4) -> "РАЊ", 11 + (3 << 4) -> "РАЏ", 11 + (4 << 4) -> "РАБ", 11 + (5 << 4) -> "РАФ", 11 + (6 << 4) -> "РА│", 11 + (7 << 4) -> "РА╗", 11 + (8 << 4) -> "РБЃ", 11 + (9 << 4) -> "РБІ", 11 + (10 << 4) -> "РБЊ", 11 + (11 << 4) -> "РБЏ", 11 + (12 << 4) -> "РББ", 11 + (13 << 4) -> "РБФ", 11 + (14 << 4) -> "РБ│", 11 + (15 << 4) -> "РБ╗",
//    12 -> "РАё", 12 + (1 << 4) -> "РАї", 12 + (2 << 4) -> "РАћ", 12 + (3 << 4) -> "РАю", 12 + (4 << 4) -> "РАц", 12 + (5 << 4) -> "РАг", 12 + (6 << 4) -> "РА┤", 12 + (7 << 4) -> "РА╝", 12 + (8 << 4) -> "РБё", 12 + (9 << 4) -> "РБї", 12 + (10 << 4) -> "РБћ", 12 + (11 << 4) -> "РБю", 12 + (12 << 4) -> "РБц", 12 + (13 << 4) -> "РБг", 12 + (14 << 4) -> "РБ┤", 12 + (15 << 4) -> "РБ╝",
//    13 -> "РАЁ", 13 + (1 << 4) -> "РАЇ", 13 + (2 << 4) -> "РАЋ", 13 + (3 << 4) -> "РАЮ", 13 + (4 << 4) -> "РАЦ", 13 + (5 << 4) -> "РАГ", 13 + (6 << 4) -> "РАх", 13 + (7 << 4) -> "РАй", 13 + (8 << 4) -> "РБЁ", 13 + (9 << 4) -> "РБЇ", 13 + (10 << 4) -> "РБЋ", 13 + (11 << 4) -> "РБЮ", 13 + (12 << 4) -> "РБЦ", 13 + (13 << 4) -> "РБГ", 13 + (14 << 4) -> "РБх", 13 + (15 << 4) -> "РБй",
//    14 -> "РАє", 14 + (1 << 4) -> "РАј", 14 + (2 << 4) -> "РАќ", 14 + (3 << 4) -> "РАъ", 14 + (4 << 4) -> "РАд", 14 + (5 << 4) -> "РА«", 14 + (6 << 4) -> "РАХ", 14 + (7 << 4) -> "РАЙ", 14 + (8 << 4) -> "РБє", 14 + (9 << 4) -> "РБј", 14 + (10 << 4) -> "РБќ", 14 + (11 << 4) -> "РБъ", 14 + (12 << 4) -> "РБд", 14 + (13 << 4) -> "РБ«", 14 + (14 << 4) -> "РБХ", 14 + (15 << 4) -> "РБЙ",
//    15 -> "РАЄ", 15 + (1 << 4) -> "РАЈ", 15 + (2 << 4) -> "РАЌ", 15 + (3 << 4) -> "РАЪ", 15 + (4 << 4) -> "РАД", 15 + (5 << 4) -> "РА»", 15 + (6 << 4) -> "РАи", 15 + (7 << 4) -> "РА┐", 15 + (8 << 4) -> "РБЄ", 15 + (9 << 4) -> "РБЈ", 15 + (10 << 4) -> "РБЌ", 15 + (11 << 4) -> "РБЪ", 15 + (12 << 4) -> "РБД", 15 + (13 << 4) -> "РБ»", 15 + (14 << 4) -> "РБи", 15 + (15 << 4) -> "РБ┐"
//  )
//
//  for ((k, v) <- braille) print(s"\"$v\", ")